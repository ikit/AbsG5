<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Regovar API</title>


    <!-- Base -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-3.0.0.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


    <style>
        h1 {
            margin-top: 100px;
        }
        code {
            margin-left:-4px;
        }

        i {
            color: #999;
        } 
        input {
            font-family: monospace;
        }
        input[type=text] {
            display: block;
            width:100%;
        }
        textarea {
            font-family: monospace;
        }

        /* Loading indicator */
        .loader {
            border: 10px solid #f3f3f3;     /* Light grey */
            border-top: 10px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* JSON highlighting */
        pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; }
        .string { color: green; }
        .number { color: darkorange; }
        .boolean { color: blue; }
        .null { color: magenta; }
        .key { color: red; }

        /* WS log table */
        .ws_logs {
          width: 90%;
          table-layout: fixed;
          border-collapse: collapse;
          
          
        }
        .ws_logs tbody tr:nth-child(even) {
              background-color: #eee;
            }

    </style>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">
                <ul class="nav navbar-nav">
                    <li class="active"><a data-toggle="tab" href="#home"><i class="glyphicon glyphicon-home"></i> Regovar {{ version }}</a></li>
                    <li><a data-toggle="tab" href="#misc"><i class="glyphicon glyphicon-asterisk"></i> Misc</a></li>
                    <li><a data-toggle="tab" href="#file"><i class="glyphicon glyphicon-file"></i> File</a></li>
                    <li><a data-toggle="tab" href="#pipe"><i class="glyphicon glyphicon-tasks"></i> Pipeline</a></li>
                    <li><a data-toggle="tab" href="#job"><i class="glyphicon glyphicon-cog"></i> Job</a></li>
                    <li><a data-toggle="tab" href="#db"><i class="glyphicon glyphicon-book"></i> Database</a></li>
                    
                    <li><a data-toggle="tab" href="#annot"><i class="glyphicon glyphicon-tag"></i> Annotations</a></li>
                    <li><a data-toggle="tab" href="#var"><i class="glyphicon glyphicon-folder-open"></i> Variants</a></li>
                    <li><a data-toggle="tab" href="#sample"><i class="glyphicon glyphicon glyphicon-tint"></i> Samples</a></li>
                    <li><a data-toggle="tab" href="#analysis"><i class="glyphicon glyphicon-equalizer"></i> Analyses</a></li>
                    
                    <li><a data-toggle="tab" href="#user"><i class="glyphicon glyphicon-user"></i> Users</a></li>
                    <li><a data-toggle="tab" href="#project"><i class="glyphicon glyphicon-folder-open"></i> Project</a></li>
                    <li><a data-toggle="tab" href="#subject"><i class="glyphicon glyphicon-briefcase"></i> Subjects</a></li>
                    <li><a data-toggle="tab" href="#event"><i class="glyphicon glyphicon-calendar"></i> Events</a></li>
                    
                    <li><a data-toggle="tab" href="#ws"><i class="glyphicon glyphicon-flash" id="ws_ico"></i> Realtime</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container" role="main">
        <h1 class="content-subhead hidden" style="margin-top:70px"><i class="fa fa-retweet" aria-hidden="true"></i> WS [ <span id="message"></span> ]</h1>
        <div class="tab-content" style="margin-top:70px">



            <!--      -->
            <!-- HOME -->
            <!--      -->
            <div id="home" class="tab-pane fade in active">
                <h1>Welcom to Regovar {{ version }}</h1>
                <p>This page is for developpers who want to know how to use Regovar via the Rest api.</p>
                <p>Choose in the top menu bar the "main" section of the API you want to see. The last one "Realtime" is a special tab where all realtime notification are logged. In addition, the color of the <i class="glyphicon glyphicon-flash" id="ws_ico"></i> indicates if the realtime is active or not : <ul>
                    <li><i class="glyphicon glyphicon-flash" style="color:lightgrey"></i> : no websocket connection available;</li>
                    <li><i class="glyphicon glyphicon-flash" style="color:orangered"></i> : error occured;</li>
                    <li><i class="glyphicon glyphicon-flash" style="color:lightgreen"></i> : websocket active (no problem detected).</li></ul>
                </p>
                <p>Endpoints of the API have an icon: <ul>
                    <li><i class="glyphicon glyphicon-ok"></i> : The endpoint is ok. No know problem with it;</li>
                    <li><i class="glyphicon glyphicon-warning-sign"></i> : Working but some limitation;</li>
                    <li><i class="glyphicon glyphicon-exclamation-sign"></i> : Not working. Know bug with this endpoint.</li>
                    </ul>
                </p>
                <p>Sometime, git issue are link in the description of the endpoint when there issue, bug or feature implementation planned. Be free to have a look to github issue. All help is welcome \o/ !</p>

                <hr/>
                <h2>Changes log</h2>
                <h3>0.2.0 [Current]</h3>
                <ul><li>API online documentation (here you are)</li>
                    <li>Adding Pirus v0.2.0 endpoints</li>
                    <li>Adding Annso v0.2.0 endpoints</li>
                    <li>Rework 0.1.0 existings endpoints to be more complient with core and cli api</li>
                </ul>
                <h3>0.1.0</h3>
                <ul><li>First version of the API with endpoints to manage users and</li>
                </ul>
            </div>



            <!--      -->
            <!-- MISC -->
            <!--      -->
            <div id="misc" class="tab-pane fade">
                <h1>Miscellaneous</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#misc_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> Config</a></li>
                            <li><a href="#misc_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> Website</a></li>
                            <li><a href="#misc_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> Api</a></li>
                            <li><a href="#misc_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> Welcom</a></li>
                        </ul>
                    </div>
                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- GET config -->
                            <div class="tab-pane fade in active" id="misc_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /config</code><br/>
                                        <i>Return the server configuration of Regovar.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10"><button onclick="generic_exec_static('/config', 'misc_result');">Test it</button></div>
                                </div>
                            </div>
                            <!-- GET home -->
                            <div class="tab-pane fade" id="misc_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /</code><br/>
                                        <i>Return the official web page of Regovar.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10"><a href="/" target="_blank" class="btn btn-default">Test it</a></div>  
                                </div>
                            </div>

                            <!-- GET api -->
                            <div class="tab-pane fade" id="misc_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /api</code><br/>
                                        <i>Return this webpage. Documentation and dynamic examples about the Regovar API.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10"><a href="/api" target="_blank" class="btn btn-default">Test it</a></div>  
                                </div>
                            </div>
                            
                             <!-- GET Welcom -->
                            <div class="tab-pane fade" id="misc_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /</code><br/>
                                        <i>Return the server "welcom" data for Regovar client : The list of 10 last analysis/subjects edited, the list of 20 last events, the list of references available, and so on.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10"><button onclick="generic_exec_static('/', 'misc_result');">Test it</button></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('misc_result');">Clear</button>
                    <pre id="misc_result"/>
                </div>
            </div>



            <!--      -->
            <!-- FILE -->
            <!--      -->
            <div id="file" class="tab-pane fade">
                <h1>File REST api</h1>
                <p>This api allow you to manage file operation on the server : list all existings file, uploading a new one, etc.</p>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#file_api_01" data-toggle="tab"><i class="glyphicon glyphicon-warning-sign"></i> list</a></li>
                            <li><a href="#file_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show</a></li>
                            <li><a href="#file_api_03" data-toggle="tab"><i class="glyphicon glyphicon-exclamation-sign"></i> edit</a></li>
                            <li><a href="#file_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete</a></li>
                            <li><a href="#file_api_05" data-toggle="tab"><i class="glyphicon glyphicon-warning-sign"></i> new</a></li>
                        </ul>
                    </div>
                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- GET files -->
                            <div class="tab-pane fade in active" id="file_api_01">
                                <div class="alert alert-info">
                                    <strong>Warning : </strong> <code style="background:none!important;">order_by</code> have an <a href="https://github.com/REGOVAR/Regovar/issues/92" target="_blank">issue</a> with "desc" ordering and <code style="background:none!important;">filter</code> is <a href="https://github.com/REGOVAR/Regovar/issues/105" target="_blank">not yet implemented</a>.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /file?...</code><br/>
                                        <i>Retrieve the list of file stored on Regovar server.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>range={offset}-{limit}</code><br/>
                                        <i>Pagination. Return only the {limit} results that start at the {offset} position.</i><br/><br/>
                                        <code>field={field_name1},{field_name2},...</code><br/>
                                        <i>Lazy loading. Specify which fields you want to get.<br/>
                                           Available fields are : {{ file_public_fields }}</i><br/><br/>
                                        <code>order_by={field_name1}["desc"],{field_name2}["desc"],...</code><br/>
                                        <i>Order result according to there value in the provided fields.</i><br/><br/>
                                        <code>filter={free_text}</code><br/>
                                        <i>Return result that match with the provided text (Fields tested are name and comments).</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="file_api_01_query" type="text" placeholder="/file?range=0-100&amp;..." value="/file"/> 
                                        <button onclick="generic_exec_from_input('file_api_01_query', 'file_result');" class="btn btn-primary">Test it</button> -
                                        <button onclick="generic_exec_static('/file', 'file_result', 'file_api_01_query');">Ex1 : get all</button> 
                                        <button onclick="generic_exec_static('/file?range=1-3', 'file_result', 'file_api_01_query');">Ex2 : range 1-3</button><br/>
                                        
                                    </div>  
                                </div>
                            </div>
                            <!-- GET file -->
                            <div class="tab-pane fade" id="file_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /file/{file_id}</code><br/>
                                        <i>Retrieve all information about the file.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The Regovar id of the file.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="file_api_02_query" type="text" placeholder="/file/{file_id}" value="/file/1"/>
                                        <button onclick="generic_exec_from_input('file_api_02_query', 'file_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>

                            <!-- PUT file -->
                            <div class="tab-pane fade" id="file_api_03">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /file/{file_id}</code><br/>
                                        <i>Update Regovar metada of the file with provided json data.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The Regovar id of the file.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <code>{key : value}</code><br/>
                                        <i>Information to update in the file. Note that only following fields are allowed to be edited via the Rest api : "name", "type", "tags".</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="file_api_03_query" type="text" placeholder="/file/{file_id}" value="/file/1"/><br/>
                                        Body : <br/>
                                        <textarea id="file_api_03_body" cols="40" rows="6">{"tags": "toto titi tata"}</textarea><br/>
                                        <button onclick="generic_exec_body('file_api_03_query', 'file_api_03_body', 'file_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>

                            <!-- DELETE file -->
                            <div class="tab-pane fade" id="file_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /file/{file_id}</code><br/>
                                        <i>Delete the file. The file is deleted in the Regovar database (SQL) and in the Regovar filesystem. If the file was referenced by one or several jobs, they still refer to this file_id, but of course nobody will be able to retrieve which file correspond to this id.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The Regovar id of the file.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="file_api_04_query" type="text" placeholder="/file/{file_id}" value="/file/1"/>
                                        <button onclick="generic_exec_from_input('file_api_04_query', 'file_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>

                            <!-- POST file (TUS) -->
                            <div class="tab-pane fade" id="file_api_05">
                                <div class="alert alert-info">
                                    <strong>Info : </strong> Checksum TUS extension is <a href="https://github.com/REGOVAR/Regovar/issues/48" target="_blank">planned</a> to be implemented/supported. But not yet available.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <i>Regovar implement the <a href="http://tus.io/" target="_blank">TUS protocol</a> for uploading file on the server. Please, refer to the  <a href="http://tus.io/protocols/resumable-upload.html#core-protocol" target="_blank">official documentation</a> for more details.</i><br/>
                                        <code>POST /file/upload</code><br/>
                                        <i>Create a new "empty" file on Regovar server that will be used to handle data and progress regarding the upload. This query will return the id of the file to use to upload the file.</i><br/><br/>
                                        <code>OPTIONS /file/upload</code><br/>
                                        <i>To know how TUS is configured on the server.</i><br/><br/>
                                        <code>HEAD /file/upload/{file_id}</code><br/>
                                        <i>To retrieve the offset where the upload of the file shall be resume.</i><br/><br/>
                                        <code>PATCH /file/upload/{file_id}</code><br/>
                                        <i>To upload a chunk a of file.</i><br/><br/>
                                        <code>DELETE /file/upload/{file_id}</code><br/>
                                        <i>To delete the uploading file.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The Regovar id of the file.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input type="hidden" id="file_api_05_endpoint" name="file_api_05_endpoint" value="http://{{ hostname }}/file/upload">
                                        <input type="hidden" id="file_api_05_chunksize" name="file_api_05_chunksize" value="256000">
                                        <input type="file" id="file_api_05_localinput"> <span class="alert" id="tus_support_alert"></span>
                                        <p id="file_api_05_progress" style="margin-top:20px; height:50px;"></p>

                                        <button onclick="RegovarFileUpload.start();">Start</button> 
                                        <button onclick="RegovarFileUpload.abort();">Pause</button> 
                                        <button onclick="exec_file_api_05_i();">Info (/file/{id})</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>
                    <h2>Result</h2>
                    <button onclick="clear_container('file_result');">Clear</button>
                    <pre id="file_result"/>
                </div>
            </div>



            <!--      -->
            <!-- PIPE -->
            <!--      -->
            <div id="pipe" class="tab-pane fade">
                <h1>Pipeline REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#pipe_api_01" data-toggle="tab"><i class="glyphicon glyphicon-warning-sign"></i> list</a></li>
                            <li><a href="#pipe_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show</a></li>
                            <li><a href="#pipe_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> install (quick)</a></li>
                            <li><a href="#pipe_api_04" data-toggle="tab"><i class="glyphicon glyphicon-exclamation-sign"></i> install</a></li>
                            <li><a href="#pipe_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete</a></li>
                        </ul>
                    </div>
                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- GET pipelines -->
                            <div class="tab-pane fade in active" id="pipe_api_01">
                                <div class="alert alert-info">
                                    <strong>Warning : </strong> <code style="background:none!important;">order_by</code> have an <a href="https://github.com/REGOVAR/Regovar/issues/92" target="_blank">issue</a> with "desc" ordering and <code style="background:none!important;">filter</code> is <a href="https://github.com/REGOVAR/Regovar/issues/105" target="_blank">not yet implemented</a>.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /pipeline?...</code><br/>
                                        <i>Retrieve the list of pipeline stored on Regovar server.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>range={offset}-{limit}</code><br/>
                                        <i>Pagination. Return only the {limit} results that start at the {offset} position.</i><br/><br/>
                                        <code>field={field_name1},{field_name2},...</code><br/>
                                        <i>Lazy loading. Specify which fields you want to get.<br/>
                                           Available fields are : {{ file_public_fields }}</i><br/><br/>
                                        <code>order_by={field_name1}["desc"],{field_name2}["desc"],...</code><br/>
                                        <i>Order result according to there value in the provided fields.</i><br/><br/>
                                        <code>filter={free_text}</code><br/>
                                        <i>Return results that match with the provided text (Fields tested are name, description, author and version).</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="pipe_api_01_query" type="text" placeholder="/pipeline?range=0-100&amp;..." value="/pipeline"/> 
                                        <button onclick="generic_exec_from_input('pipe_api_01_query', 'pipe_result');" class="btn btn-primary">Test it</button> - 
                                        <button onclick="generic_exec_static('/pipeline', 'pipe_result', 'pipe_api_01_query');">Ex1 : get all</button> 
                                        <button onclick="generic_exec_static('/pipeline?range=1-3', 'pipe_result', 'pipe_api_01_query');">Ex2 : range 1-3</button><br/>
                                    </div>  
                                </div>
                            </div>
                            <!-- GET pipeline -->
                            <div class="tab-pane fade" id="pipe_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /pipeline/{pipe_id}</code><br/>
                                        <i>Retrieve all information about the pipeline.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>pipe_id</code><br/>
                                        <i>The Regovar id of the pipeline.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="pipe_api_02_query" type="text" placeholder="/pipeline/{pipe_id}" value="/pipeline/1"/>
                                        <button onclick="generic_exec_from_input('pipe_api_02_query', 'pipe_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- GET install -->
                            <div class="tab-pane fade" id="pipe_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /pipeline/install/{file_id}/{container_manager_type}</code><br/>
                                        <i>Install a pipeline from the image file which have been already uploaded on the server and have the id {file_id}.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The Regovar id of the file. This file will be used as pipeline image by the Regovar container manager.</i><br/><br/>
                                        <code>container_manager_type</code><br/>
                                        <i>The type of the container manager to use to install the pipeline image. List of available container manager is available in the server config (<code>/config</code>)</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="pipe_api_03_query" type="text" placeholder="/pipeline/install/{file_id}/{container_manager_type}" value="/pipeline/install/1/lxd"/>
                                        <button onclick="generic_exec_from_input('pipe_api_03_query', 'pipe_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- POST install -->
                            <div class="tab-pane fade" id="pipe_api_04">
                                <div class="alert alert-danger">
                                    <strong>Warning : </strong> <a href="https://github.com/REGOVAR/Regovar/issues/93" target="_blank">To be implemented</a>.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /pipeline</code><br/>
                                        <i>The generic endpoint to install a pipeline. A json form shall be provide in the body of the post to describe how to proceed to install the pipeline. There is 3 differents way to do the installation :<ul>
                                            <li>from an image file already uploaded. You shall set "container_type" and "file_id" params in the body;</li>
                                            <li>from an image that is currently uploading. The installation will start automatically when the upload finish. You shall set "container_type" and "file_id" params in the body;</li>
                                            <li>from an url. According to the type of the container. You shall set "container_type" and "pipe_url" params in the body.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <code>{ "container_type" : value, "pipe_url" : value, "file_id" : value}</code><br/>
                                        <i>Information to update in the file. Note that only following fields are allowed to be edited via the Rest api : "name", "type", "tags".</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="pipe_api_04_query" type="text" placeholder="/pipeline/install" value="/pipeline/install" readonly="readonly"/>
                                        Body : <br/>
                                        <textarea id="pipe_api_04_body" cols="40" rows="6">{"pipe_url": "http://...", "container_type": "lxd"}</textarea><br/>
                                        <button onclick="generic_exec_body('pipe_api_04_query', 'pipe_api_04_body', 'pipe_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- DELETE pipeline -->
                            <div class="tab-pane fade" id="pipe_api_05">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /pipeline/{pipe_id}</code><br/>
                                        <i>Delete the pipeline. The pipeline is deleted in the Regovar database (SQL) and in the Regovar filesystem. All jobs of this pipe are still here, and they still refer to this pipeline_id, but of course nobody will be able to retrieve which pipeline correspond to this id.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>pipe_id</code><br/>
                                        <i>The Regovar id of the pipeline.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="pipe_api_05_query" type="text" placeholder="/pipeline/{pipe_id}" value="/pipeline/1"/>
                                        <button onclick="generic_exec_from_input('pipe_api_05_query', 'pipe_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('pipe_result');">Clear</button>
                    <pre id="pipe_result"/>
                </div>
            </div>



            <!--      -->
            <!-- JOB  -->
            <!--      -->
            <div id="job" class="tab-pane fade">
                <h1>Job REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#job_api_01" data-toggle="tab"><i class="glyphicon glyphicon-warning-sign"></i> list</a></li>
                            <li><a href="#job_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show</a></li>
                            <li><a href="#job_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#job_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> pause</a></li>
                            <li><a href="#job_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> start</a></li>
                            <li><a href="#job_api_06" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> cancel</a></li>
                            <li><a href="#job_api_07" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> finalize</a></li>
                            <li><a href="#job_api_08" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> monitoring</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List jobs -->
                            <div class="tab-pane fade in active" id="job_api_01">
                                <div class="alert alert-info">
                                    <strong>Warning : </strong> <code style="background:none!important;">order_by</code> have an <a href="https://github.com/REGOVAR/Regovar/issues/92" target="_blank">issue</a> with "desc" ordering and <code style="background:none!important;">filter</code> is <a href="https://github.com/REGOVAR/Regovar/issues/105" target="_blank">not yet implemented</a>.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job?...</code><br/>
                                        <i>Retrieve the list of job on Regovar server.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>range={offset}-{limit}</code><br/>
                                        <i>Pagination. Return only the {limit} results that start at the {offset} position.</i><br/><br/>
                                        <code>field={field_name1},{field_name2},...</code><br/>
                                        <i>Lazy loading. Specify which fields you want to get.<br/>
                                           Available fields are : {{ file_public_fields }}</i><br/><br/>
                                        <code>order_by={field_name1}["desc"],{field_name2}["desc"],...</code><br/>
                                        <i>Order result according to there value in the provided fields.</i><br/><br/>
                                        <code>filter={free_text}</code><br/>
                                        <i>Return results that match with the provided text (Fields tested are name, pipeline's name and version).</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_01_query" type="text" placeholder="/job?range=0-100&amp;..." value="/job"/> 
                                        <button onclick="generic_exec_from_input('job_api_01_query', 'job_result');" class="btn btn-primary">Test it</button> - 
                                        <button onclick="generic_exec_static('/job', 'job_result', 'job_api_01_query');">Ex1 : get all</button> 
                                        <button onclick="generic_exec_static('/job?range=1-3', 'job_result', 'job_api_01_query');">Ex2 : range 1-3</button><br/>
                                    </div>  
                                </div>
                            </div>
                            <!-- Show job -->
                            <div class="tab-pane fade" id="job_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}</code><br/>
                                        <i>Retrieve all information about the job.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_02_query" type="text" placeholder="/job/{job_id}" value="/job/1"/>
                                        <button onclick="generic_exec_from_input('job_api_02_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- New job -->
                            <div class="tab-pane fade" id="job_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /job</code><br/>
                                        <i>Create a new job with provided json configuration in the body of the post request.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>ContentType</b></div>
                                    <div class="col-sm-10">
                                        <code>'application/json'</code><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <i>As a json request, the body is a json dictionnary with following keys: </i><br/>
                                        <code>"pipeline_id" : int</code><br/>
                                        <i>Refer to the id of a pipeline "ready" to be used on the Regovar server.</i><br/><br/>
                                        <code>"name" : str</code><br/>
                                        <i>The name of the job.</i><br/><br/>

                                        <code>"config" : {json}</code><br/>
                                        <i>The json data that will be provided to the pipeline to configure the job. You can download the json form use to generate this config 
                                           by looking the form.json document of the pipe (<code>/pipeline/{pipeline_id}</code>). If the pipeline do no provide form.json file, 
                                           then, you can let this entry empty.<br/>
                                           IMPORTANT : the form.json describe the form to set the config json. so you dont have to set config with all information describe in the 
                                           form.json file. The config shall be a simple key-value dictionnary</i><br/><br/>

                                        <code>"inputs" : [int,...]</code><br/>
                                        <i>A list of Regovar file's file id. Note that if one or several file are not ready to be used (still uploading by
                                                example), je job will be in "waiting" status and will automaticaly start when all inputs files will be ready. Of course, if a file is deleted
                                                or its upload never end, the job will never start. And you will have to stop or delete it yourself.</i>

                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Main query : <br/>
                                        <input id="job_api_03_query" type="text" placeholder="/job" value="/job" readonly="readonly"/>
                                        Body : to set config, retrieve the form.json document of the pipeline you want to run (<code>/pipeline/{pipeline_id}</code>)<br/>
                                        <textarea id="job_api_03_body" cols="60" rows="10">{ 
    "pipeline_id" : 1, 
    "name" : "My Test Job",
    "config" : {
        "Prop1" : "value 1", 
        "HasProp2" : true
    },
    "inputs" : []
}</textarea><br/>
                                        <button onclick="generic_exec_body('job_api_03_query', 'job_api_03_body', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Pause job -->
                            <div class="tab-pane fade" id="job_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}/pause</code><br/>
                                        <i>Pause the execution of the job (if this feature is supported by the pipeline).</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_04_query" type="text" placeholder="/job/{job_id}/pause" value="/job/1/pause"/>
                                        <button onclick="generic_exec_from_input('job_api_04_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Start job -->
                            <div class="tab-pane fade" id="job_api_05">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}/start</code><br/>
                                        <i>Restart a job which have been paused.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_05_query" type="text" placeholder="/job/{job_id}/start" value="/job/1/start"/>
                                        <button onclick="generic_exec_from_input('job_api_05_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Cancel job -->
                            <div class="tab-pane fade" id="job_api_06">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}/cancel</code><br/>
                                        <i>Stop the execution of the job. Then the job status is "canceled" and cannot be start again (a new job shall be created).</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_06_query" type="text" placeholder="/job/{job_id}/cancel" value="/job/1/cancel"/>
                                        <button onclick="generic_exec_from_input('job_api_06_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Finalize job -->
                            <div class="tab-pane fade" id="job_api_07">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}/finalize</code><br/>
                                        <i>This action can be done automaticaly by Regovar when the execution of the job is done. But if for some raison, the pipeline is not able to indicate to Regovar that its task is finished, Regovar cannot finalize the job and doing technical tasks like stopping and deleting the virtual machine used for the job. So for these pipeline, the api provide a way to manualy finalize a job.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_07_query" type="text" placeholder="/job/{job_id}/finalize" value="/job/1/finalize"/>
                                        <button onclick="generic_exec_from_input('job_api_07_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Monitoring job-->
                            <div class="tab-pane fade" id="job_api_08">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /job/{job_id}/monitoring</code><br/>
                                        <i>Return job's informations with additional monitoring informations: technical ressources usage (RAM, CPU, ...) and execution's log (only last 100 lines).</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>job_id</code><br/>
                                        <i>The Regovar id of the job.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="job_api_08_query" type="text" placeholder="/job/{job_id}/monitoring" value="/job/1/monitoring"/>
                                        <button onclick="generic_exec_from_input('job_api_08_query', 'job_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <h2>Result</h2>
                                <button onclick="clear_container('job_result');">Clear</button>
                                <pre id="job_result"/>
                            </div>
                            <div class="col">
                                <h2>Jobs status</h2>
                                <button onclick="refresh_job_panel();">Force refresh</button>
                                <ul id="job_panel">

                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    
                </div>
            </div>



            <!--    -->
            <!-- DB -->
            <!--    -->
            <div id="db" class="tab-pane fade">
                <h1>Databases REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#db_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list ref</a></li>
                            <li><a href="#db_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list db</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List ref -->
                            <div class="tab-pane fade in active" id="db_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /db</code><br/>
                                        <i>Return the list of database's reference available on Regovar server.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="db_api_01_query" type="text" placeholder="/db" value="/db"/> 
                                        <button onclick="generic_exec_from_input('db_api_01_query', 'db_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- List dbs -->
                            <div class="tab-pane fade" id="db_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /db/{ref_name}</code><br/>
                                        <i>Return the list of databases for the provided reference.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>ref_name</code><br/>
                                        <i>The name of the reference.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="db_api_02_query" type="text" placeholder="/db/{ref_name}" value="/db/hg19"/> 
                                        <button onclick="generic_exec_from_input('db_api_02_query', 'db_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('db_result');">Clear</button>
                    <pre id="db_result"/>
                    </pre>
                </div>
            </div>



            <!--             -->
            <!-- ANNOTATIONS -->
            <!--             -->
            <div id="annot" class="tab-pane fade">
                <h1>Annotations REST api</h1>
                <p>API to manage annotation's databases and fields used for dynamic filtering of variants.</p>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#annot_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list ref</a></li>
                            <li><a href="#annot_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list db</a></li>
                            <li><a href="#annot_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show db</a></li>
                            <li><a href="#annot_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show field</a></li>
                            <li><a href="#annot_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete db</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List ref -->
                            <div class="tab-pane fade in active" id="annot_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /annotation</code><br/>
                                        <i>Return the list of database's reference available on the Regovar variants database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="annot_api_01_query" type="text" placeholder="/annotation" value="/annotation"/> 
                                        <button onclick="generic_exec_from_input('annot_api_01_query', 'annot_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- List dbs -->
                            <div class="tab-pane fade" id="annot_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /annotation/{ref_name}</code><br/>
                                        <i>Return the list of annotations databases for the provided reference.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>ref_id</code><br/>
                                        <i>The id of the reference.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="annot_api_02_query" type="text" placeholder="/annotation/{ref_id}" value="/annotation/2"/> 
                                        <button onclick="generic_exec_from_input('annot_api_02_query', 'annot_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- show annotation database -->
                            <div class="tab-pane fade" id="annot_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /annotation/db/{db_id}</code><br/>
                                        <i>Return many details on the annotations database and the list of all available annotation's fields available.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>db_id</code><br/>
                                        <i>The id of the annotation database.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="annot_api_03_query" type="text" placeholder="/annotation/db/{db_id}" value="/annotation/db/d9121852fc1a279b95cb7e18c976f112"/> 
                                        <button onclick="generic_exec_from_input('annot_api_03_query', 'annot_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- show annotation field -->
                            <div class="tab-pane fade" id="annot_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /annotation/field/{field_id}</code><br/>
                                        <i>Return all informations about the annotations field.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>field_id</code><br/>
                                        <i>The id of the annotation field.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="annot_api_04_query" type="text" placeholder="/annotation/field/{field_id}" value="/annotation/field/de2b02e8a7f3c77cf55efd18e0832f22"/> 
                                        <button onclick="generic_exec_from_input('annot_api_04_query', 'annot_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Delete db -->
                            <div class="tab-pane fade" id="annot_api_05">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /annotation/db/{db_id}</code><br/>
                                        <i>Delete an annotation database with all its fields. The user have to take care regarding side effects of this actions on his analysis.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>ref_id</code><br/>
                                        <i>The id of the database.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="annot_api_05_query" type="text" placeholder="/annotation/db/{db_id}" value="/annotation/db/d9121852fc1a279b95cb7e18c976f112"/> 
                                        <button onclick="generic_exec_from_input('annot_api_05_query', 'annot_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('annot_result');">Clear</button>
                    <pre id="annot_result"/>
                    </pre>
                </div>
            </div>



            <!--          -->
            <!-- VARIANTS -->
            <!--          -->
            <div id="var" class="tab-pane fade">
                <h1>Variants REST api</h1>
                <p>API to manage regovar's variants database used for dynamic filtering.</p>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#annot_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show</a></li>
                            <li><a href="#var_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> show (analysis context)</a></li>
                            <!--<li><a href="#var_api_03" data-toggle="tab"><i class="glyphicon glyphicon-exclamation-sign"></i> new</a></li>-->
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- show variant -->
                            <div class="tab-pane fade in active" id="annot_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /variant/{ref_id}/{variant_id}</code><br/>
                                        <i>Return all information about the given variant.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>ref_id</code><br/>
                                        <i>The id of the reference.</i><br/><br/>
                                        <code>variant_id</code><br/>
                                        <i>The id of the variant.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="var_api_01_query" type="text" placeholder="/variant/{ref_id}/{variant_id}" value="/variant/2/1"/> 
                                        <button onclick="generic_exec_from_input('var_api_01_query', 'var_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- show variant (analysis context) -->
                            <div class="tab-pane fade" id="var_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /variant/{ref_id}/{variant_id}/{analysis_id}</code><br/>
                                        <i>Return all available information about the given variant + data in the context of the analysis.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>ref_id</code><br/>
                                        <i>The id of the reference.</i><br/><br/>
                                        <code>variant_id</code><br/>
                                        <i>The id of the variant.</i><br/><br/>
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="var_api_02_query" type="text" placeholder="/variant/{ref_id}/{variant_id}/{analysis_id}" value="/variant/2/1/1"/> 
                                        <button onclick="generic_exec_from_input('var_api_02_query', 'var_result');" class="btn btn-primary">Test it</button>
                                    </div>
                                </div>
                            </div>
                            <!-- show annotation database -->
                            <div class="tab-pane fade" id="var_api_03">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /variant</code><br/>
                                        <i>Import all variant and their annotations provided as json in the POST body into the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>[
    {
        sample_id:int, 
        bin:int, 
        chr:enum, 
        pos:int, 
        ref:str, 
        samples:[
        {
            id:int,
            alt:str, 
            dp:int, 
            gt:enum
        },
        ...], 
        annotations:
        [
            {&lt;field_uid&gt;:&lt;field_value&gt;},
        ...]
    }, 
    ...
]</pre><br/>
                                        <i>The list of variant and their annotation. Note that annotation database and field must already exists in the database (see annotation api to see how to manage it).</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="var_api_03_query" type="text" placeholder="/variant" value="/variant"/><br/>
                                        Body : <br/>
                                        <textarea id="var_api_03_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('var_api_03_query', 'var_api_03_body', 'var_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('var_result');">Clear</button>
                    <pre id="var_result"/>
                    </pre>
                </div>
            </div>



            <!--         -->
            <!-- SAMPLES -->
            <!--         -->
            <div id="sample" class="tab-pane fade">
                <h1>Sample REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#sample_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#sample_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#sample_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> import</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List samples -->
                            <div class="tab-pane fade in active" id="sample_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /sample</code><br/>
                                        <i>Return the list of samples in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="sample_api_01_query" type="text" placeholder="/sample" value="/sample"/> 
                                        <button onclick="generic_exec_from_input('sample_api_01_query', 'sample_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get sample -->
                            <div class="tab-pane fade" id="sample_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /sample/{sample_id}</code><br/>
                                        <i>Get all details about the sample.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>sample_id</code><br/>
                                        <i>The id of the sample.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="sample_api_02_query" type="text" placeholder="/sample/{sample_id}" value="/sample/1"/> 
                                        <button onclick="generic_exec_from_input('sample_api_02_query', 'sample_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- import sample -->
                            <div class="tab-pane fade" id="sample_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /sample/import/{file_id}/{ref_id}?...</code><br/>
                                        <i>Import samples data from file. Today, only VCF(.gz) files are supported.</i><br/>
                                        <i>Optional query parameters allow you to link the samples imported to a subject and or an analysis.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>file_id</code><br/>
                                        <i>The id of the file to import.</i><br/><br/>
                                        <code>ref_id</code><br/>
                                        <i>The id of the reference to use.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="sample_api_03_query" type="text" placeholder="/sample/import/{file_id}/{ref_id}?..." value="/sample/import/1/2"/> 
                                        <button onclick="generic_exec_from_input('sample_api_03_query', 'sample_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('sample_result');">Clear</button>
                    <pre id="sample_result"/>
                    </pre>
                </div>
            </div>



            <!--          -->
            <!-- ANALYSES -->
            <!--          -->
            <div id="analysis" class="tab-pane fade">
                <h1>Analysis REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#analysis_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#analysis_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#analysis_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#analysis_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> update</a></li>
                            <li><a href="#analysis_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> load file</a></li>
                            <li><a href="#analysis_api_06" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list filters</a></li>
                            <li><a href="#analysis_api_07" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new filter</a></li>
                            <li><a href="#analysis_api_08" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete filter</a></li>
                            <li><a href="#analysis_api_09" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> filtering</a></li>
                            <li><a href="#analysis_api_10" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> filtering count</a></li>
                            <li><a href="#analysis_api_11" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> clear wt</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List analyses -->
                            <div class="tab-pane fade in active" id="analysis_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /analysis</code><br/>
                                        <i>Return the list of analyses.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_01_query" type="text" placeholder="/analysis" value="/analysis"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_01_query', 'analysis_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get analysis details -->
                            <div class="tab-pane fade" id="analysis_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /analysis/{analysis_id}</code><br/>
                                        <i>Return the details of the analysis.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_02_query" type="text" placeholder="/analysis/{analysis_id}" value="/analysis/1"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_02_query', 'analysis_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new analysis -->
                            <div class="tab-pane fade" id="analysis_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /analysis</code><br/>
                                        <i>Create a new analysis with provided information. The template_id is optional.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "project_id":int,
    "name":str, 
    "reference_id":int, 
    "template_id":int
}</pre><br/>
                                        <i>The only mandatory fields are <code>project_id</code> and <code>name</code>. If the <code>reference_id</code> is not set, the default (hg19) is taken. 
                                        <code>template_id</code> allow you to initialize the analysis with predefined filter, attributes and fields.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="analysis_api_03_query" type="text" placeholder="/analysis" value="/analysis"/><br/>
                                        Body : <br/>
                                        <textarea id="analysis_api_03_body" cols="40" rows="6">{"project_id": 1, "name": "My test", "reference_id":2}</textarea><br/>
                                        <button onclick="generic_exec_body('analysis_api_03_query', 'analysis_api_03_body', 'analysis_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- update analysis -->
                            <div class="tab-pane fade" id="analysis_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /analysis/{analysis_id}</code><br/>
                                        <i>Update information about the analysis. Data that can be updated with this method are : <ul>
                                            <li><code>name</code>       : the name of the analysis</li>
                                            <li><code>owner_id</code>   : the user that own this analysis</li>
                                            <li><code>project_id</code> : the project that own this analysis</li>
                                            <li><code>filter</code>     : the current filter (read the doc about building filter)</li>
                                            <li><code>fields</code>     : the list of fields to display in the grid</li>
                                            <li><code>selection</code>  : the list of selected variants/transcripts</li>
                                            <li><code>comment</code>    : a free comment about the analysis</li>
                                            <li><code>samples</code>    : the list of tuple (samples'ids, optional nickname) used for this analysis</li>
                                            <li><code>attributes</code> : the list of attributes and their values for each sample</li>
                                            <li><code>filters</code>    : the list of saved filters</li>
                                        </i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "name":str, 
    "owner_id":int,
    "project_id":int,
    "filter":dict,
    "fields":[int],
    "selection":[int],
    "comment":str,
    "samples":[(int,str)],
    "attributes":[{"name":str, "samples_values":[{<sample_id:int> : <attribute_value:str>}]}],
    "filters":[{"name":str, "filter":dict}]
}</pre><br/>
                                        
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Main query : <br/>
                                        <input id="analysis_api_04_query" type="text" placeholder="/analysis/{sample_id}" value="/analysis/1"/>
                                        <textarea id="analysis_api_04_body" cols="60" rows="10">{
    "name": "name updated", 
    "comment": "coucou"
}</textarea><br/>
                                        <button onclick="generic_exec_body('analysis_api_04_query', 'analysis_api_04_body', 'analysis_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- Load file  -->
                            <div class="tab-pane fade" id="analysis_api_05">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /analysis/{analysis_id}/load/{file_id}</code><br/>
                                        <i>Load a file into the analysis. Supported file are : <ul>
                                            <li><code>VCF / GVCF</code> : import samples, variants and annotations in the database add sample to this analysis;</li>
                                            <li><code>PED / FAM</code>  : define attributes to manage pedigree. If sample's name used in the ped file doesn't match with sample's name or nickname used in the analysis, 
                                            the attribute will be created, but no value will be set for corresponding sample.</li>
                                        </i><br/>
                                        <i>Note : The file must be already uploaded.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i><br/><br/>
                                        <code>file_id</code><br/>
                                        <i>The id of the file to load.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_05_query" type="text" placeholder="/analysis/{analysis_id}/load/{file_id}" value="/analysis/1/load/1"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_05_query', 'analysis_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- list filters -->
                            <div class="tab-pane fade" id="analysis_api_06">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /analysis/{analysis_id}/filter</code><br/>
                                        <i>Return the list of filters saved for this analysis.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_06_query" type="text" placeholder="/analysis/{analysis_id}/filter" value="/analysis/1/filter"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_06_query', 'analysis_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new filter -->
                            <div class="tab-pane fade" id="analysis_api_07">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /analysis/{analysis_id}/filter</code><br/>
                                        <i>Create a new analysis with provided information. The template_id is optional.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "name":str, 
    "filter":json, 
    "description":str
}</pre><br/>
                                        <i>The only mandatory fields are <code>name</code> and <code>filter</code>.</i></br>
                                        <i> Read the doc about the json format used to describe filter : TODO.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="analysis_api_07_query" type="text" placeholder="/analysis/{analysis_id}/filter" value="/analysis/1/filter"/><br/>
                                        Body : <br/>
                                        <textarea id="analysis_api_07_body" cols="40" rows="6">{"name": "My filter", "filter": ["AND", []]}</textarea><br/>
                                        <button onclick="generic_exec_body('analysis_api_07_query', 'analysis_api_07_body', 'analysis_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>
                                </div>
                            </div>
                            <!-- delete filter -->
                            <div class="tab-pane fade" id="analysis_api_08">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /analysis/{analysis_id}/filter/{filter_id}"</code><br/>
                                        <i>Delete the filter.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_08_query" type="text" placeholder="/analysis/{analysis_id}/filter/{filter_id}"" value="/analysis/1/filter/1"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_08_query', 'analysis_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- filtering -->
                            <div class="tab-pane fade" id="analysis_api_09">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /analysis/{analysis_id}/filtering</code><br/>
                                        <i>Apply the provided filter and return the list of filtered variants.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "filter": json, 
    "fields": [<field_id>], 
    "order": [<field_id>],
    "limit": int,
    "offset": int
}</pre><br/>
                                        <i> Read the doc about the json format used to describe filter : TODO.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="analysis_api_09_query" type="text" placeholder="/analysis/{analysis_id}/filtering" value="/analysis/1/filtering"/><br/>
                                        Body : <br/>
                                        <textarea id="analysis_api_09_body" cols="40" rows="6">{"filter": ["AND",[]]}</textarea><br/>
                                        <button onclick="generic_exec_body('analysis_api_09_query', 'analysis_api_09_body', 'analysis_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>
                                </div>
                            </div>
                            <!-- filtering count -->
                            <div class="tab-pane fade" id="analysis_api_10">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /analysis/{analysis_id}/filtering/count</code><br/>
                                        <i>Apply the provided filter and return the total count of results that match the filter.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "filter": json, 
    "fields": [<field_id>], 
    "order": [<field_id>]
}</pre><br/>
                                        <i> Read the doc about the json format used to describe filter : TODO.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="analysis_api_10_query" type="text" placeholder="/analysis/{analysis_id}/filtering/count" value="/analysis/1/filtering/count"/><br/>
                                        Body : <br/>
                                        <textarea id="analysis_api_10_body" cols="40" rows="6">{"filter": ["AND",[]]}</textarea><br/>
                                        <button onclick="generic_exec_body('analysis_api_10_query', 'analysis_api_10_body', 'analysis_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>
                                </div>
                            </div>


                            <!-- clear temporary data -->
                            <div class="tab-pane fade" id="analysis_api_11">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /analysis/{analysis_id}/clear_temps_data</code><br/>
                                        <i>Clear temporary data of the analysis (to save disk space by example)</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>analysis_id</code><br/>
                                        <i>The id of the analysis.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="analysis_api_11_query" type="text" placeholder="/analysis/{analysis_id}/clear_temps_data" value="/analysis/1/clear_temps_data"/> 
                                        <button onclick="generic_exec_from_input('analysis_api_11_query', 'analysis_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('analysis_result');">Clear</button>
                    <pre id="analysis_result"/>
                    </pre>
                </div>
            </div>



            <!--       -->
            <!-- USERS  -->
            <!--      -->
            <div id="user" class="tab-pane fade">
                <h1>Sample REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#user_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#user_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#user_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#user_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> update</a></li>
                            <li><a href="#user_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete</a></li>
                            <li><a href="#user_api_06" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> login</a></li>
                            <li><a href="#user_api_07" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> logout</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List users -->
                            <div class="tab-pane fade in active" id="user_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Access</b></div>  
                                    <div class="col-sm-10">
                                        <i class="glyphicon glyphicon-ok" style="color:green"></i> No authentication required.
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /user</code><br/>
                                        <i>Return the list of user in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="user_api_01_query" type="text" placeholder="/user" value="/user"/> 
                                        <button onclick="generic_exec_from_input('user_api_01_query', 'user_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get user -->
                            <div class="tab-pane fade" id="user_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Access</b></div>  
                                    <div class="col-sm-10">
                                        <i class="glyphicon glyphicon-lock" style="color:orange"></i> Authentication required.
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /user/{user_id}</code><br/>
                                        <i>Get all details about the user.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>user_id</code><br/>
                                        <i>The id of the user.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="user_api_02_query" type="text" placeholder="/user/{user_id}" value="/user/1"/> 
                                        <button onclick="generic_exec_from_input('user_api_02_query', 'user_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new user -->
                            <div class="tab-pane fade" id="user_api_03">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Access</b></div>  
                                    <div class="col-sm-10">
                                        <i class="glyphicon glyphicon-lock" style="color:red"></i> Authentication as Administrator required.
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /user</code><br/>
                                        <i>Create a new user with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "login":str, 
    "firstname":str, 
    "lastname":str, 
    "email":str,
    "function":str,
    "location":str
    "password":str
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="user_api_03_query" type="text" placeholder="/user" value="/user"/><br/>
                                        Body : <br/>
                                        <textarea id="user_api_03_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('user_api_03_query', 'user_api_03_body', 'user_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- update user -->
                            <div class="tab-pane fade" id="user_api_04">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /user/{user_id}</code><br/>
                                        <i>Update the user with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>user_id</code><br/>
                                        <i>The id of the user.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "login":str, 
    "firstname":str, 
    "lastname":str, 
    "email":str,
    "function":str,
    "location":str
    "password":str
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="user_api_04_query" type="text" placeholder="/user/{user_id}" value="/user/1"/><br/>
                                        Body : <br/>
                                        <textarea id="user_api_04_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('user_api_04_query', 'user_api_04_body', 'user_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- delete user -->
                            <div class="tab-pane fade" id="user_api_05">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /user/{user_id}</code><br/>
                                        <i>Delete the user.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>user_id</code><br/>
                                        <i>The id of the user.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="user_api_05_query" type="text" placeholder="/user/{user_id}" value="/user/1"/> 
                                        <button onclick="generic_exec_from_input('user_api_05_query', 'user_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- login -->
                            <div class="tab-pane fade" id="user_api_06">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /user/login</code><br/>
                                        <i>Attempt to log in with provided credentials.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "login":str,
    "password":str
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="user_api_06_query" type="text" placeholder="/user/login" value="/user/login"/><br/>
                                        Body : <br/>
                                        <textarea id="user_api_06_body" cols="40" rows="6">{"login":"admin", "password":""}</textarea><br/>
                                        <button onclick="generic_exec_body('user_api_06_query', 'user_api_06_body', 'user_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- logout -->
                            <div class="tab-pane fade" id="user_api_07">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /user/logout</code><br/>
                                        <i>Disconnect the user.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="user_api_07_query" type="text" placeholder="/user/logout" value="/user/logout"/> 
                                        <button onclick="generic_exec_from_input('user_api_07_query', 'user_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('user_result');">Clear</button>
                    <pre id="user_result"/>
                    </pre>
                </div>
            </div>



            <!--          -->
            <!-- PROJECTS -->
            <!--          -->
            <div id="project" class="tab-pane fade">
                <h1>Project REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#project_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#project_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#project_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#project_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> update</a></li>
                            <li><a href="#project_api_05" data-toggle="tab"><i class="glyphicon glyphicon-exclamation-sign"></i> delete</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List projects -->
                            <div class="tab-pane fade in active" id="project_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /project</code><br/>
                                        <i>Return the list of projects in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="project_api_01_query" type="text" placeholder="/project" value="/project"/> 
                                        <button onclick="generic_exec_from_input('project_api_01_query', 'project_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get project -->
                            <div class="tab-pane fade" id="project_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /project/{project_id}</code><br/>
                                        <i>Get all details about the project.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>project_id</code><br/>
                                        <i>The id of the project.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="project_api_02_query" type="text" placeholder="/project/{project_id}" value="/project/1"/> 
                                        <button onclick="generic_exec_from_input('project_api_02_query', 'project_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new project -->
                            <div class="tab-pane fade" id="project_api_03">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /project</code><br/>
                                        <i>Create a new project with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "name":str, 
    "is_folder":bool, 
    "comment":str, 
    "parent_id":int
}</pre><br/>
                                        <i>The only mandatory fields is <code>name</code>. By default <code>is_folder</code> is false. <code>parent_id</code> link to another project and allow to create arborescence of folder/project.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="project_api_03_query" type="text" placeholder="/project" value="/project"/><br/>
                                        Body : <br/>
                                        <textarea id="project_api_03_body" cols="40" rows="6">{"name": "My new project"}</textarea><br/>
                                        <button onclick="generic_exec_body('project_api_03_query', 'project_api_03_body', 'project_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- update project -->
                            <div class="tab-pane fade" id="project_api_04">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /project/{project_id}</code><br/>
                                        <i>Update the project with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>project_id</code><br/>
                                        <i>The id of the project.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "name":str, 
    "is_folder":bool, 
    "comment":str, 
    "parent_id":int
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="project_api_04_query" type="text" placeholder="/project/{project_id}" value="/project/1"/><br/>
                                        Body : <br/>
                                        <textarea id="project_api_04_body" cols="40" rows="6">{"comment":"update the comment"}</textarea><br/>
                                        <button onclick="generic_exec_body('project_api_04_query', 'project_api_04_body', 'project_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- delete projects -->
                            <div class="tab-pane fade" id="project_api_05">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>DELETE /project/{project_id}</code><br/>
                                        <i>Return the list of projects in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>project_id</code><br/>
                                        <i>The id of the project.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="project_api_05_query" type="text" placeholder="/project/{project_id}" value="/project/2"/> 
                                        <button onclick="generic_exec_from_input('project_api_05_query', 'project_result', 'DELETE');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('project_result');">Clear</button>
                    <pre id="project_result"/>
                    </pre>
                </div>
            </div>



            <!--          -->
            <!-- SUBJECTS -->
            <!--          -->
            <div id="subject" class="tab-pane fade">
                <h1>Subject REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#subject_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#subject_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#subject_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#subject_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> update</a></li>
                            <li><a href="#subject_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List subject -->
                            <div class="tab-pane fade in active" id="subject_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /subject</code><br/>
                                        <i>Return the list of subject in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="subject_api_01_query" type="text" placeholder="/subject" value="/subject"/> 
                                        <button onclick="generic_exec_from_input('subject_api_01_query', 'subject_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get subject -->
                            <div class="tab-pane fade" id="subject_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /subject/{subject_id}</code><br/>
                                        <i>Get all details about the subject.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>subject_id</code><br/>
                                        <i>The id of the subject.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="subject_api_02_query" type="text" placeholder="/subject/{subject_id}" value="/subject/1"/> 
                                        <button onclick="generic_exec_from_input('subject_api_02_query', 'subject_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new subject -->
                            <div class="tab-pane fade" id="subject_api_03">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /subject</code><br/>
                                        <i>Create a new subject with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "date":datetime, 
    "message":str, 
    "type":enum, 
    "user_id":int,
    "project_id":int,
    "analysis_id":int,
    "file_id":int,
    "subject_id":int,
    "job_id":int,
    "pipeline_id":int
}</pre><br/>
                                        <i>The only mandatory fields are <code>date</code> and <code>message</code>.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="subject_api_03_query" type="text" placeholder="/subject" value="/subject"/><br/>
                                        Body : <br/>
                                        <textarea id="subject_api_03_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('subject_api_03_query', 'subject_api_03_body', 'subject_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- update subject -->
                            <div class="tab-pane fade" id="subject_api_04">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /subject/{subject_id}</code><br/>
                                        <i>Update the subject with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>subject_id</code><br/>
                                        <i>The id of the subject.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "date":datetime, 
    "message":str, 
    "type":enum, 
    "user_id":int,
    "project_id":int,
    "analysis_id":int,
    "file_id":int,
    "subject_id":int,
    "job_id":int,
    "pipeline_id":int
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="subject_api_04_query" type="text" placeholder="/subject/{event_id}" value="/subject/1"/><br/>
                                        Body : <br/>
                                        <textarea id="subject_api_04_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('subject_api_04_query', 'subject_api_04_body', 'subject_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('subject_result');">Clear</button>
                    <pre id="subject_result"/>
                    </pre>
                </div>
            </div>



            <!--        -->
            <!-- EVENTS -->
            <!--         -->
            <div id="event" class="tab-pane fade">
                <h1>Sample REST api</h1>
                <div class="panel with-nav-tabs panel-default">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#event_api_01" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> list</a></li>
                            <li><a href="#event_api_02" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> get</a></li>
                            <li><a href="#event_api_03" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> new</a></li>
                            <li><a href="#event_api_04" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> update</a></li>
                            <li><a href="#event_api_05" data-toggle="tab"><i class="glyphicon glyphicon-ok"></i> delete</a></li>
                        </ul>
                    </div>


                    <div class="panel-body">
                        <div class="tab-content">
                            <!-- List events -->
                            <div class="tab-pane fade in active" id="event_api_01">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /event</code><br/>
                                        <i>Return the list of event in the database.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="event_api_01_query" type="text" placeholder="/event" value="/event"/> 
                                        <button onclick="generic_exec_from_input('event_api_01_query', 'event_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- get event -->
                            <div class="tab-pane fade" id="event_api_02">
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>GET /event/{event_id}</code><br/>
                                        <i>Get all details about the event.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>event_id</code><br/>
                                        <i>The id of the event.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        <input id="event_api_02_query" type="text" placeholder="/event/{event_id}" value="/event/1"/> 
                                        <button onclick="generic_exec_from_input('event_api_02_query', 'event_result');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- new event -->
                            <div class="tab-pane fade" id="event_api_03">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>POST /event</code><br/>
                                        <i>Create a new event with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "date":datetime, 
    "message":str, 
    "type":enum, 
    "user_id":int,
    "project_id":int,
    "analysis_id":int,
    "file_id":int,
    "subject_id":int,
    "job_id":int,
    "pipeline_id":int
}</pre><br/>
                                        <i>The only mandatory fields are <code>date</code> and <code>message</code>. Optional fields that end by "_id" are to link the event to an other objects in the database.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="event_api_03_query" type="text" placeholder="/event" value="/event"/><br/>
                                        Body : <br/>
                                        <textarea id="event_api_03_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('event_api_03_query', 'event_api_03_body', 'event_result', 'POST');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                            <!-- update event -->
                            <div class="tab-pane fade" id="event_api_04">
                                <div class="alert alert-danger">
                                    <strong>Warning !</strong> Implemenation of this endpoint is not finished.
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Description</b></div>  
                                    <div class="col-sm-10">
                                        <code>PUT /event/{event_id}</code><br/>
                                        <i>Update the event with provided information.</i>
                                    </div>  
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Parameters</b></div>
                                    <div class="col-sm-10">
                                        <code>event_id</code><br/>
                                        <i>The id of the event.</i>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Body</b></div>
                                    <div class="col-sm-10">
                                        <pre>{
    "date":datetime, 
    "message":str, 
    "type":enum, 
    "user_id":int,
    "project_id":int,
    "analysis_id":int,
    "file_id":int,
    "subject_id":int,
    "job_id":int,
    "pipeline_id":int
}</pre><br/>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-2"><b>Test</b></div>  
                                    <div class="col-sm-10">
                                        Query : 
                                        <input id="event_api_04_query" type="text" placeholder="/event/{event_id}" value="/event/1"/><br/>
                                        Body : <br/>
                                        <textarea id="event_api_04_body" cols="40" rows="6">{...}</textarea><br/>
                                        <button onclick="generic_exec_body('event_api_04_query', 'event_api_04_body', 'event_result', 'PUT');" class="btn btn-primary">Test it</button>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Result</h2>
                    <button onclick="clear_container('event_result');">Clear</button>
                    <pre id="event_result"/>
                    </pre>
                </div>
            </div>
            
            
            
            <!--      -->
            <!-- WS   -->
            <!--      -->
            <div id="ws" class="tab-pane fade">
                <div style="width:700px; margin:auto;">
                    <h1>Last message received</h1>
                    <div id="ws_message"></div>
                    <h1>Historic</h1>
                    <div style="overflow: auto; width: 100%; height: 75%; border: 1px solid #ccc;">
                        <table class="ws_logs" >
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Sender</th>
                                    <th>Message</th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody id="ws_logs">
                                <tr>
                                    <td>Apple</td>
                                    <td>Red</td>
                                    <td>These are red.</td>
                                </tr>
                                <tr>
                                    <td>Date</td>
                                    <td>Sender</td>
                                    <td>Message</td>
                                    <td>Data</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script src="/assets/tus.js"></script>
    <script>
        var rootURL = "http://{{ hostname }}";



        function syntaxHighlight(json) 
        {
            if (typeof json != 'string') 
            {
                 json = JSON.stringify(json, undefined, 4);
            }
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) 
            {
                var cls = 'number';
                if (/^"/.test(match)) 
                {
                    if (/:$/.test(match)) 
                    {
                        cls = 'key';
                    } 
                    else 
                    {
                        cls = 'string';
                    }
                } 
                else if (/true|false/.test(match)) 
                {
                    cls = 'boolean';
                } 
                else if (/null/.test(match)) 
                {
                    cls = 'null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }
        function clear_container(id)
        {
            $('#'+id).html("");
            // 
        }
        function buildProgressBar(percentage, containerId) 
        {
            var html = "<div class='progress'>\
                        <div class='progress-bar progress-bar-striped active' role='progressbar' aria-valuenow='" + percentage + "' aria-valuemin='0' aria-valuemax='0' \
                            style='min-width: 2em; width: " + percentage + "%;'>\
                            " + percentage + "% \
                        </div>\
                    </div>";

            if (containerId !== null)
            {
                $("#" + containerId).html(html);
            }
            return html;
        }

        var username = "Admin"
        var password = ""

        function generic_exec_from_input(input_id, result_id, verb="GET")
        {


            $('#' + result_id).html('<div class="loader"></div>');
            $.ajax(
            {
                url: rootURL + $("#" + input_id).val(),
                type: verb
            }).fail(function(err)
            {
                $('#' + result_id).html("Status  : " + err["status"] + " - " + err["statusText"] + "\nMessage : " + err["responseText"]);
            }).done(function(json) 
            {
                $('#' + result_id).html(syntaxHighlight(json));
            })
        }
        function generic_exec_static(endpoint, result_id, input_id=false, verb="GET")
        {
            $('#' + result_id).html('<div class="loader"></div>');
            if (input_id)
            {
                $("#" + input_id).val(endpoint);
            }
            $.ajax(
            {
                url: rootURL + endpoint,
                type: verb
            }).fail(function(err)
            {
                $('#' + result_id).html("Status  : " + err["status"] + " - " + err["statusText"] + "\nMessage : " + err["responseText"]);
            }).done(function(json) 
            {
                $('#' + result_id).html(syntaxHighlight(json));
            })
        }
        function generic_exec_body(input_id, body_id, result_id, verb="POST")
        {
            $('#' + result_id).html('<div class="loader"></div>');
            $.ajax(
            {
                url: rootURL + $("#" + input_id).val(),
                type: verb,
                contentType: 'application/json',
                data: JSON.stringify($("#" + body_id).val())
            }).fail(function(err)
            {
                $('#' + result_id).html("Status  : " + err["status"] + " - " + err["statusText"] + "\nMessage : " + err["responseText"]);
            }).done(function(json) 
            {
                $('#' + result_id).html(syntaxHighlight(json));
            })
        }



        // FILE EXEC

        function exec_file_api_05_i()
        {
            $('#' + result_id).html('<div class="loader"></div>');
            $.ajax(
            {
                url: rootURL + "/file/" + RegovarFileUpload.url.split("/")[2],
                type: "GET"
            }).fail(function()
            {
                alert( "ERROR" );
            }).done(function(json) 
            {
                $('#file_result').html(syntaxHighlight(json));
            })
        }





        function refresh_job_panel()
        {
            alert("todo");
        }











        // WEBSOCKETS SESSION
        var ws = new WebSocket('ws://{{ hostname }}/ws');
        var $message = $('#ws_message');
        var $ico = $("#ws_ico");

        function ws_new_msg(sender, msg, data="")
        {
            if (msg == "error")
            {
                $ico.css("color", "orangered");
                $message.attr("class", 'label label-warning');
            }
            else if (msg == "close")
            {
                $ico.css("color", "lightgrey");
                $message.attr("class", 'label label-warning');
            }
            else
            {
                $ico.css("color", "lightgreen");
                $message.attr("class", 'label label-success');
            }

            var dt = new Date();
            var time = dt.getHours() + "h " + dt.getMinutes() + "m " + dt.getSeconds() + "s"

            $('#ws_logs').append("<tr><td>" + time + "</td><td>" + sender + "</td><td>" + msg + "</td><td>" + data + "</td></tr>");
        }

        function ws_onopen()
        {
            ws_new_msg("Regovar", "open")
        };
        function ws_onmessage(ev)
        {
            var json = JSON.parse(ev.data);
            ws_new_msg("Regovar", json["msg"], json["data"])

            switch(json["msg"])
            {
                case 'run_changed':
                    ws_run_changed(json["data"])
                    break;
                case 'file_changed':
                    ws_file_changed(json["data"])
                    break;
                case 'error':
                    ws_error(json["data"])
                    break;
            }
        };
        function ws_onclose(ev)
        {
            // Try to reconnect websocket every seconds
            ws_new_msg("Me", "close", ev.data)
            setTimeout(ws_setup, 1000);
        };
        function ws_onerror(ev)
        {
            ws_new_msg("Me", "error", ev.data)
        };
        function ws_setup()
        {
            $ico.css("color", "lightgrey");
            ws = new WebSocket('ws://{{ hostname }}/ws'); //new WebSocket((location.protocol == 'https:' ? 'wss://' : 'ws://') + '{{ hostname }}/ws');
            //ws.onerror = ws_onerror;
            ws.onopen = ws_onopen;
            ws.onmessage = ws_onmessage;
            ws.onclose = ws_onclose;
        }




        // TUS Client for File upload
        var RegovarFileUpload = null;
        var RegovarFileInput = document.querySelector("#file_api_05_localinput");
        var RegovarFileAlertBox = document.querySelector("#tus_support_alert");
        var RegovarFileChunkInput = document.querySelector("#file_api_05_chunksize");
        var RegovarFileEndpointInput = document.querySelector("#file_api_05_endpoint");

        if (!tus.isSupported) 
        {
            RegovarFileAlertBox.className = RegovarFileAlertBox.className.replace("hidden", "");
        }

        RegovarFileInput.addEventListener("change", function(e) 
        {
            var file = e.target.files[0];
            console.log("selected file", file);
            var endpoint = RegovarFileEndpointInput.value;
            var chunkSize = parseInt(RegovarFileChunkInput.value, 10);


            if (isNaN(chunkSize)) 
            {
                chunkSize = Infinity;
            }
            var options = {
                endpoint: endpoint,
                resume: true,
                chunkSize: chunkSize,
                metadata: { filename: file.name },
                onError: function(error) 
                {
                    RegovarFileInput.value = "";
                    alert("Failed because: " + error);
                },
                onProgress: function(bytesUploaded, bytesTotal) 
                {
                    var percentage = (bytesUploaded / bytesTotal * 100).toFixed(2);
                    console.log(bytesUploaded, bytesTotal, percentage + "%");
                    buildProgressBar(percentage, "file_api_05_progress");
                },
                onSuccess: function() 
                {
                    RegovarFileInput.value = "";
                    $("#file_api_05_progress").html("");

                }
            }

            RegovarFileUpload = new tus.Upload(file, options);
            RegovarFileUpload.start();
        })


        // ON DOCUMENT READY
        $(document).ready(function()
        {
            // Init websocket
            ws_setup();
        });

    </script>
</body>
</html> 